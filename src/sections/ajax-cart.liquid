<div data-section-id="{{ section.id }}" data-section-type="ajax-cart">
  <div class="ajax-cart-container" data-ajax-cart-container>
      <form action="/cart" method="post" class="ajax-cart-form" novalidate>
        <div class="ajax-cart__header">
          {{ 'cart.general.title' | t }}
          <a href="#" class="ajax-cart__close" data-ajax-cart-close>
            {% include 'icon-close' %}
          </a>
        </div>
        <div class="ajax-cart__body" data-ajax-cart-body>
          {% comment %} Filled in via JS {% endcomment %}
        </div>
        <div class="ajax-cart__footer" data-ajax-cart-footer>
          <div class="ajax-cart__footer-top" data-ajax-cart-footer-top>
            {% comment %} Filled in via JS {% endcomment %}
          </div>
          <div class="ajax-cart__footer-bottom">
            <div class="ajax-cart__footer-row">
              <button type="submit" name="checkout" class="btn btn-block btn-secondary">
                {{ 'cart.general.checkout' | t }}
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

{% raw %}
  <script type="text/x-handlebars-template" data-ajax-cart-body-template>
    {{#if items}}
      <ul class="ajax-cart__list">
      {{#each items}}
        <li class="ajax-cart__item" data-key="{{ key }}" data-qty="{{ quantity }}" data-ajax-item>
          <div class="ajax-cart__item-image">
            <img src="{{ image }}">
          </div>
          <div class="ajax-cart__item-contents">
            <a href="{{ url }}" class="ajax-cart__item-header">
              <div class="ajax-cart__item-title">{{ product_title }}</div>
            </a>
            <div class="ajax-cart__item-body">
              <div>
                {{ price }}
                <br />
                Ships Sept 21, 2020
              </div>
              <div>
                <div class="quantity-adjuster" data-quantity-adjuster>
                  <button class="quantity-adjuster__decrement" data-decrement>-</button>
                  <input type="number" value="{{ quantity }}" min="0" />
                  <button class="quantity-adjuster__increment" data-increment>+</button>
                </div>                
              </div>
              <div style="align-self: center">
                {{ line_price }}
              </div>
            </div>
          </div>
        </li>
      {{/each}}
    </ul>
  {{else}}
    <div class="ajax-cart__empty-message">
      {% endraw %}
      {% if section.settings.empty_text != blank %}
        {{ section.settings.empty_text }}
      {% else %}
        {{ 'cart.general.empty' | t }}
      {% endif %}

      {% if section.settings.empty_image %}
        <img src="{{ section.settings.empty_image | img_url: '600x' }}" />
      {% endif %}
      {% raw %}
    </div>
  {{/if}}
  </script>

  <script type="text/x-handlebars-template" data-ajax-cart-footer-top-template>
    <div class="ajax-cart__footer-row">
      <div>
        Taxes & Shipping<br />calculated at checkout
      </div>
      <div>
        <span style="display: inline-block; margin-right: 15px;">Subtotal:</span>
        {{ total_price }}
      </div>
    </div>
  </script>
{% endraw %}


{% schema %}
  {
    "name": "Ajax Cart",
    "settings": [
      {
        "type": "header",
        "content": "Empty Cart"
      },
      {
        "id": "empty_text",
        "type": "richtext",
        "label": "Text",
        "default": "<p>There aren't any items<br/>in your cart yet.</p>"
      },
      {
        "id": "empty_image",
        "type": "image_picker",
        "label": "Image"
      }
    ]
  }
{% endschema %}
